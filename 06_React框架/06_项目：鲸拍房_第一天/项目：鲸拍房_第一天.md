![logo](images\logo.png)

# é¡¹ç›®ï¼šé²¸æ‹æˆ¿_ç¬¬ä¸€å¤©

**ä¸»è¦å†…å®¹**

* Ant Designåº“
* è·¯ç”±é…ç½®
* lessé…ç½®
* å¯¼èˆªèœå•
* é¦–é¡µæœç´¢åŒºåŸŸ

**å­¦ä¹ ç›®æ ‡**

 çŸ¥è¯†ç‚¹| è¦æ±‚ 
 -| :- 
 Ant Designåº“ | æŒæ¡ 
 è·¯ç”±é…ç½® | æŒæ¡ 
 lessé…ç½® | æŒæ¡ 
 å¯¼èˆªèœå• | æŒæ¡ 
 é¦–é¡µæœç´¢åŒºåŸŸ | æŒæ¡ 



## ä¸€ã€Ant Designåº“

### 1.1 Ant Designåº“ä»‹ç»

`antd` æ˜¯åŸºäº Ant Design è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚

â€‹	![logo](images\and.png)



âœ¨ ç‰¹æ€§

- ğŸŒˆ æç‚¼è‡ªä¼ä¸šçº§ä¸­åå°äº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰é£æ ¼ã€‚
- ğŸ“¦ å¼€ç®±å³ç”¨çš„é«˜è´¨é‡ React ç»„ä»¶ã€‚
- ğŸ›¡ ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚
- âš™ï¸ å…¨é“¾è·¯å¼€å‘å’Œè®¾è®¡å·¥å…·ä½“ç³»ã€‚
- ğŸŒ æ•°åä¸ªå›½é™…åŒ–è¯­è¨€æ”¯æŒã€‚
- ğŸ¨ æ·±å…¥æ¯ä¸ªç»†èŠ‚çš„ä¸»é¢˜å®šåˆ¶èƒ½åŠ›ã€‚



### åˆ›å»ºé¡¹ç›®ï¼š

```bash
npx create-react-app project 

npm i create-react-app -g
create-react-app react-jingpaifang
```



æ­¥éª¤ï¼š

1ã€åˆ›å»ºé¡¹ç›®ï¼š

create-react-app react-jingpaifang

2ã€é™ç‰ˆæœ¬   

npm i react@17 react-dom@17 -S

3ã€å®‰è£…antd

npm install antd --save

4ã€åˆ æ‰app.js é‡Œçš„header

<img src="images/image-20220412095755444.png" alt="image-20220412095755444" style="zoom:50%;" />

5ã€éšä¾¿å¼•å…¥æŒ‰é’®æµ‹è¯• antd







### 1.2 å®‰è£…

ä½¿ç”¨ npm æˆ– yarn å®‰è£…

**æˆ‘ä»¬æ¨èä½¿ç”¨ npm æˆ– yarn çš„æ–¹å¼è¿›è¡Œå¼€å‘**ï¼Œä¸ä»…å¯åœ¨å¼€å‘ç¯å¢ƒè½»æ¾è°ƒè¯•ï¼Œä¹Ÿå¯æ”¾å¿ƒåœ°åœ¨ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…éƒ¨ç½²ä½¿ç”¨ï¼Œäº«å—æ•´ä¸ªç”Ÿæ€åœˆå’Œå·¥å…·é“¾å¸¦æ¥çš„è¯¸å¤šå¥½å¤„ã€‚

```bash
$ npm install antd --save
$ yarn add antd
```

å¦‚æœä½ çš„ç½‘ç»œç¯å¢ƒä¸ä½³ï¼Œæ¨èä½¿ç”¨ [cnpm]ã€‚

å¼•å…¥æ ·å¼

```js
import 'antd/dist/antd.css'; // or 'antd/dist/antd.less'
```



### 1.3 Ant Designåº“åŠ è½½æ ·å¼

1. å…¨å±€å¼•å…¥

2. import 'antd/dist/antd.css'

â€‹     ä¼˜ç‚¹ï¼šå¯¼å…¥äº†æ‰€æœ‰çš„ç»„ä»¶çš„æ ·å¼ ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ä¸ç”¨è€ƒè™‘æ ·å¼

â€‹     ç¼ºç‚¹ï¼šå¯¼å…¥æ— ç”¨çš„ç»„ä»¶çš„cssæ ·å¼ 



  3. æŒ‰éœ€å¼•å…¥

â€‹     1. å®‰è£…é…ç½®ï¼šbabel-plugin-import (æ¨è) 

â€‹      gitHubï¼šhttps://github.com/ant-design/babel-plugin-import

â€‹     2. npm run eject æš´éœ²webpack.config.js 

â€‹     3. npm install babel-plugin-import --save-dev

   4. é…ç½®ä¸€ä¸ªæ ¹ç›®å½•(src)æ–‡ä»¶  (æ³¨ï¼šæš´éœ²äº†webpackåéœ€è¦åˆ é™¤package.jsonæ–‡ä»¶é‡Œé¢çš„babelé…ç½®)

      .babelrcï¼š

```.babelrc
{
    "presets": [
       "react-app"
       ],
    "plugins": [["import", {
        "libraryName": "antd",
        "style": "css"
    }]]
}
```



æˆ–è€… package.json:

![image-20220306154351010](images/image-20220306154351010.png)



#### å…³é—­æµè§ˆå™¨è‡ªå¯åŠ¨ï¼ˆéœ€è¦æš´éœ²Webpackï¼‰ï¼š

![image-20220306153417350](images/image-20220306153417350.png)



#### Reactå…³é—­Eslintï¼ˆéœ€è¦æš´éœ²Webpackï¼‰:

åœ¨ package.json ä¸­ä¿®æ”¹ä¸ºä¸€ä¸‹

```js
"eslintConfig": {
	"extends": "react-app",
	"rules": {
        "no-undef": "off",
        "no-restricted-globals": "off",
        "no-unused-vars": "off"
	 }
}
```





### 1.4 åŸºæœ¬ä½¿ç”¨

â€‹	![logo](images\antd.png)

ä»£ç æ¼”ç¤º

```jsx
import { Button } from 'antd';

ReactDOM.render(
  <>
    <Button type="primary">Primary Button</Button>
    <Button>Default Button</Button>
    <Button type="dashed">Dashed Button</Button>
    <br />
    <Button type="text">Text Button</Button>
    <Button type="link">Link Button</Button>
  </>,
  mountNode,
);
```





## äºŒã€è·¯ç”±é…ç½®

### é¡¹ç›®å‡†å¤‡

1. åˆ é™¤æ— ç”¨çš„ç»„ä»¶ æ–‡ä»¶

   ![image-20220412111905503](images/image-20220412111905503.png)

2. åˆ›å»ºåˆå§‹åŒ–æ–‡ä»¶ base.css (å…¬å¸å†…éƒ¨)

3. åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶ components  pages/views 

4. å®‰è£…è·¯ç”± react-router-dom    ==axios==  

   ```bash
   npm install --save react-router-dom@5.3  axios
   ```

5. Reactå…³é—­Eslintï¼ˆéœ€è¦æš´éœ²Webpackï¼‰:

   åœ¨ package.json ä¸­ä¿®æ”¹ä¸ºä¸€ä¸‹

   ```js
   "eslintConfig": {
   	"extends": "react-app",
   	"rules": {
           "no-undef": "off",
           "no-restricted-globals": "off",
           "no-unused-vars": "off"
   	 }
   }
   ```

6. å…³é—­æµè§ˆå™¨è‡ªå¯åŠ¨

   ![image-20220412112003324](images/image-20220412112003324.png)



### 2.1 æ•ˆæœå›¾

â€‹	![logo](images\01.png)



### 2.2 è·¯ç”±é…ç½®ä»£ç 

```jsx
//å¯¼å…¥è·¯ç”±é…ç½®æ¨¡å—
import { HashRouter as Router, Route, Switch, Redirect, Link } from 'react-router-dom'
//å¯¼å…¥ç»„ä»¶
import Layout from './pages/Layout/Layout'
import Login from './pages/Login/Login'
import Home from './pages/Home/Home'
import News from './pages/News/News'
import House from './pages/House/House'
function App() {
  return (
    <Router>
      <Switch>
        {/* ç™»å½•ç•Œé¢ */}
        <Route path='/login' component={Login} />
        
        {/* å¸ƒå±€ç•Œé¢ */}
        <Layout path='/'>
          <Switch>
            <Route exact path='/' component={Home} />
            <Route path='/house' component={House} />
            <Route path='/news' component={News} />
          </Switch>
        </Layout>

      </Switch>
    </Router>
  );
}

export default App;
```



## ä¸‰ã€lessé…ç½®

### 3.1 å®‰è£…less

â€‹	React è„šæ‰‹æ¶é‡Œé¢å·²ç»é…ç½®äº† Sassï¼Œåªéœ€è¦å®‰è£… Sasså³å¯ï¼›ä½†æ˜¯ï¼Œå¹¶æ²¡æœ‰é…ç½® Lessï¼Œè¿™éœ€è¦æˆ‘ä»¬å»é…ç½® webpack.config.js

1. å®‰è£…ï¼ˆæ³¨æ„ç‰ˆæœ¬ï¼‰

   ```js
   npm i less less-loader@7.x -S
   ```

2. npm run eject

3. é…ç½®ä¿®æ”¹ webpack.config.js  å¤åˆ¶ä¸€ä»½sassä¿®æ”¹less



config/webpack.config.js:

![image-20220306160127751](images/image-20220306160127751.png)



### 3.2 ä¿®æ”¹é…ç½®æ–‡ä»¶

ç„¶è€Œä½ ä¼šå‘ç°ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºçš„é¡¹ç›®ä¸­å¹¶æ‰¾ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ï¼ŒåŸå› å°±æ˜¯ä½ éœ€è¦æš´éœ²å®ƒæ‰èƒ½çœ‹åˆ°å®ƒï¼š

```bash
npm run eject
```

â€‹	![logo](images\03.png)

**çœŸæ­£é…ç½® Less**

```js
const lessRegex = /\.less$/;
const lessModuleRegex = /\.module\.less$/;
```



```js
{
  test: lessRegex,
  exclude: lessModuleRegex,
  use: getStyleLoaders({
    importLoaders: 1,
    modules: true,
    sourceMap: isEnvProduction && shouldUseSourceMap
  },
    "less-loader"
  ),
  sideEffects: true
},
{
  test: lessModuleRegex,
  use: getStyleLoaders({
    importLoaders: 1,
    sourceMap: isEnvProduction && shouldUseSourceMap,
    modules: true,
    getLocalIdent: getCSSModuleLocalIdent
  },
    "less-loader"
  )
},

```

é…ç½®å¥½é‡å¯å¯åŠ¨é¡¹ç›®å°±å¯ä»¥äº†













## å››ã€å¯¼èˆªèœå•

### 4.1 æ•ˆæœå±•ç¤º

â€‹	![logo](images\nav.png)

### 4.2 ä»£ç æ¼”ç¤º

#### å¸ƒå±€ç»„ä»¶ Layout.jsx :

```jsx
import React, { Component } from 'react'
import MyMenu from './MyMenu/MyMenu'
export default class Layout extends Component {
    render() {
        return (
            <div>
               {/* å¯¼èˆªåŒºåŸŸ */}
                <MyMenu/>
               {/* è·¯ç”±å‡ºå£ */}
               {
                   this.props.children
               }
            </div>
        )
    }
}

```



#### å¯¼èˆªç»„ä»¶ MyMenu.jsxå¸ƒå±€

```jsx
import React, { Component } from 'react'
import { NavLink } from 'react-router-dom'
import logo from '../../../assets/images/logo.jpg'
import { Menu, Dropdown } from 'antd';
import { DownOutlined } from '@ant-design/icons';
import './style.scss'
// import styles from './style.module.scss'
import api from '../../../api/index'
export default class MyMenu extends Component {
    constructor(){
        super()
        this.state={
            citys:[],//åŸå¸‚åˆ—è¡¨
        }
    }
     //ç½‘ç»œè¯·æ±‚
    componentDidMount(){
        api.getCity()
        .then(res=>{
            console.log(res.data);
            console.log(res.data.data);
            this.setState({
                citys:res.data.data
            })
        })
    }
    //å‡½æ•°
    onClick=({key})=>{
        console.log('å½“å‰é€‰æ‹©çš„åŸå¸‚idä¸ºï¼š',key);
    }

    render() {
        const menu = (
            // è·å–èœå•ç‚¹å‡»çš„key ä¹Ÿå°±æ˜¯åŸå¸‚çš„æ ‡è¯† id    onClick={onClick}
            <Menu onClick={this.onClick}>
                {
                    this.state.citys.map((ele)=>{
                        return <Menu.Item key={ele.id}>
                                <a rel="noopener noreferrer" href="##">
                                    {ele.name}
                                </a>
                            </Menu.Item>
                    })
                }
            </Menu>
        )
        return (
            <div className='menu'>
                <div className='container'>
                    <div className='left'>
                        <img src={logo} width='180' height='72' style={{marginRight:'10px'}} alt="" />
                        {/* åŸå¸‚åˆ‡æ¢ */}
                        <Dropdown overlay={menu}>
                            <a className="ant-dropdown-link" onClick={e => e.preventDefault()}>
                                åŒ— äº¬ <DownOutlined />
                            </a>
                        </Dropdown>

                    </div>
                    <div className='right'>
                        <NavLink exact to='/'>é¦–é¡µ</NavLink>
                        <NavLink to='/house'>æ³•æ‹æˆ¿æº</NavLink>
                        <NavLink to='/news'>æ³•æ‹èµ„è®¯</NavLink>
                        <NavLink to='/aa'>æˆåŠŸæ¡ˆä¾‹</NavLink>
                        <NavLink to='/bb'>å…³äºæˆ‘ä»¬</NavLink>
                        <span>ç™»å½•/æ³¨å†Œ</span>
                    </div>
                </div>
            </div>
        )
    }
   
}

```



#### æ ·å¼ MyMenu.module.lessï¼š

```less
.menu {
    background-color: #fff;
    font-size: 16px;

    .container {
        display: flex;
        width: 1200px;
        height: 80px;
        line-height: 80px;
        margin: 0 auto;
    

        .left {
            flex: 1;
        }

        .right {
            a {
                color: #333;
                padding: 0 20px;
                display: inline-block;
            }

            .active {
                font-weight: bold;
            }
        }
    }
}
```





#### è¯·æ±‚åœ°å€ï¼š

```js
const api= {
    city:'http://www.jingpaifang.cn/api/api/api/app/available/cities', //è¯·æ±‚åŸå¸‚åˆ—è¡¨ï¼Œ
    houseInfo:'http://www.jingpaifang.cn/api/api/api/app/daily/summary?city=110100', //æˆ¿æºä¿¡æ¯
    ignore:"/api/api/api/app/search/houses/ignore",//æ¡æ¼æˆ¿æº
}

export default api;
```





ä¸¥æ ¼æ¨¡å¼ä¸æ”¯æŒä½ç‰ˆæœ¬å¯¼è‡´çš„é—®é¢˜ï¼Œå…³é—­ä¸¥æ ¼æ¨¡å¼

![image-20220308201052928](images/image-20220308201052928.png)





## äº”ã€é¦–é¡µæœç´¢åŒºåŸŸ

### 5.1 æ•ˆæœå›¾

â€‹	![logo](images\search.png)	

### 5.2 ä»£ç æ¼”ç¤º

```jsx
import React, { Component } from 'react'
import { Input } from 'antd';
import api from '../../api/index'
import styles from './style.module.less'
const { Search } = Input;
export default class Home extends Component {
    constructor() {
        super()
        this.state = {
            houseInfo: {},//æˆ¿æºä¿¡æ¯
        }
    }
    //ç”Ÿå‘½å‘¨æœŸ
    componentDidMount() {
        //æˆ¿æºä¿¡æ¯------------------------------------
        api.getHouseInfo()
            .then(res => {
                console.log('æˆ¿æºä¿¡æ¯---', res.data);
                this.setState({
                    houseInfo: res.data.data
                })
            })
        //æ¡æ¼æˆ¿æº
        api.getIgnore({ pageNo: 0, pageSize: 9, authorId: "129465", sortId: 1, city: 110100 })
            .then(res => {
                console.log('æ¡æ¼æˆ¿æº', res.data);
            })
    }
    //å‡½æ•°
    onSearch = (value) => {
        console.log(value);
    }
    render() {
        return (
            <div>
                {/* 1. æœç´¢åŒºåŸŸ */}
                <div className={styles.main}>
                    <div className={styles['main-content']}>
                        <ul className={styles['main-info']}>
                            <li>
                                ä»Šæ—¥
                                <div className={styles.info}> æ³•æ‹å¿«è®¯</div>
                            </li>
                            <li>
                                {this.state.houseInfo.addCount} å¥—
                                <div className={styles.info}>ä»Šæ—¥ä¸Šæ‹</div>
                            </li>
                            <li>
                                {this.state.houseInfo.overCount} å¥—
                                <div className={styles.info}>ä»Šæ—¥æˆäº¤</div>
                            </li>
                            <li>
                                {this.state.houseInfo.strikeCount} å¥—
                                <div className={styles.info}>ä»Šæ—¥æµæ‹</div>
                            </li>
                            <li>
                                {this.state.houseInfo.cancelCount} å¥—
                                <div className={styles.info}>ä»Šæ—¥æ’¤æ‹</div>
                            </li>
                        </ul>
                        {/*æœæœ */}
                        <div className={styles.search}>
                            {/* <Input placeholder="è¯·è¾“å…¥ä½ å–œæ¬¢çš„æˆ¿æº" className={styles.input} /> */}
                            <Search
                                placeholder="è¯·è¾“å…¥ä½ å–œæ¬¢çš„æˆ¿æº"
                                allowClear
                                enterButton="æœç´¢"
                                size="large"
                                onSearch={this.onSearch}
                            />
                        </div>
                    </div>
                </div>

                {/* 2. çƒ­é—¨æˆ¿æº */}

                {/* 3. æ¡æ¼ */}


            </div>
        )
    }
}

```

æ ·å¼

```less
.main{
    height: 600px;
    background: url('../../assets/images/banner3.jpg') no-repeat top center;
    width: 100%;
    overflow: hidden;
    .main-content{
        width: 1200px;
        margin:  0 auto;
        position: relative;
        margin-top: 360px;
        .main-info{
            display: flex;
            padding:0 200px;
            li{
                flex: 1;
                text-align: center;
                color: #fff;
                font-size: 20px;
                font-weight: bold;
                border-right: 1px solid rgb(219, 219, 219);
            }
            .info{
                color: #aaa;
                margin-top: 4px;
                font-size: 18px;
            }
            li:last-child{
                border-right: 0;
            }
        }
    }
    .search {
        padding:0 60px;
    }
}
```



### 5.3 è¯·æ±‚æ¥å£é…ç½®

![image-20220328160450523](images/image-20220328160450523.png)

```js
/**
 * å…¬å…±çš„è¯·æ±‚æ–¹æ³•
 */
import base from './base'
import axios from 'axios'

const api = {
    /**
     * åˆ‡æ¢åŸå¸‚
     */
    getCity() {
        return axios.get(base.host+base.city)
    },
    /**
     * å½“å‰åŸå¸‚çš„æ‹æˆ¿æºä¿¡æ¯
     */
    getHouseInfo() {
        return axios.get(base.host+base.houseInfo)
    },
    /**
     * æ¡æ¼æˆ¿æº
     * {pageNo: 0, pageSize: 9, authorId: "129465", sortId: 1, city: 110100}
     */
    getIgnore(params){
        return axios.post(base.host+base.ignore,params)
    }
}

export default api
```





## ==æŠ¥é”™å¤„ç†==

### 1ã€` npm run eject` æš´éœ²æ–‡ä»¶å‡ºé”™

![image-20220306152612461](images/image-20220306152612461.png)

æ˜¯gitåœ°å€çš„é—®é¢˜ï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤è¡Œå°±è¡Œäº†:

```
1 git add .
2 git commit -m "Save before ejecting"
3 npm run eject
```

å‘½ä»¤ç»“æŸåå‡ºç°Ejected successfully!å³æš´éœ²webpacké…ç½®æ–‡ä»¶æˆåŠŸã€‚







# 4.3 axios ç½‘ç»œè¯·æ±‚

Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚

**ç‰¹ç‚¹**

- ä»æµè§ˆå™¨ä¸­åˆ›å»º [XMLHttpRequests](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)
- ä» node.js åˆ›å»º [http](http://nodejs.org/api/http.html) è¯·æ±‚
- ==æ”¯æŒ [Promise] API==
- ==æ‹¦æˆªè¯·æ±‚å’Œå“åº”==
- è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®
- ==å–æ¶ˆè¯·æ±‚==
- ==è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®==
- å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ [XSRF]





```jsx
axios.get('http://iwenwiki.com/api/blueberrypai/getIndexBanner.php')
    .then(res=>{
    console.log('=========================',res.data);
})
```









**å®‰è£…**

ä½¿ç”¨ npm:

```shell
$ npm install axios
```

ä½¿ç”¨ bower:

```shell
$ bower install axios
```

ä½¿ç”¨ cdn:

```js
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
```



**æ‰§è¡Œ `GET` è¯·æ±‚**

```js
import Axios from 'axios'

// ä¸ºç»™å®š ID çš„ user åˆ›å»ºè¯·æ±‚
Axios.get('http://iwenwiki.com/api/blueberrypai/getIndexBanner.php')
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });

// å¯é€‰åœ°ï¼Œä¸Šé¢çš„è¯·æ±‚å¯ä»¥è¿™æ ·åš
axios.get('http://localhost:8000?user', {
    params: {
      ID: 12345ï¼Œ
      msgï¼š'123'
    }
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
```



**æ‰§è¡Œ `POST` è¯·æ±‚**

```js
axios.post('/foo/user', {
    user_id: 'iwen@qq.com',
    password: 'iwen143',
    verification_code:'crfvw'
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
```

```js
// å‘é€ POST è¯·æ±‚
axios({
  method: 'post',
  url: '/user/12345',
  data: {
    firstName: 'Fred',
    lastName: 'Flintstone'
  }
});
```

**æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚**

```js
function getUserAccount() {
  return axios.get('/user/12345');
}

function getUserPermissions() {
  return axios.get('/user/12345/permissions');
}

axios.all([getUserAccount(), getUserPermissions()])
  .then(axios.spread(function (acct, perms) {
    // ä¸¤ä¸ªè¯·æ±‚ç°åœ¨éƒ½æ‰§è¡Œå®Œæˆ
  }));

axios.race([funA(),funB(),funC()]) //æ¯”èµ›
.then(res=>{
    console.log(1111)
})
```

